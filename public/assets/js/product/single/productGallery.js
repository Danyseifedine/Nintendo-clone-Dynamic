export default function initializeProductGallery(){const thumbnailGrid=document.querySelector('.thumbnail-grid');const thumbnails=document.querySelectorAll('.thumbnail-grid > div');const mainImage=document.getElementById('mainImage');const nextBtn=document.querySelector('.pagination-next');const prevBtn=document.querySelector('.pagination-prev');const mainPrevBtn=document.querySelector('.main-pagination-prev');const mainNextBtn=document.querySelector('.main-pagination-next');let currentImageIndex=0;const thumbnailWidth=thumbnails[0].offsetWidth+12;const visibleThumbnails=6;let scrollPosition=0;function setActiveThumbnail(element){thumbnails.forEach(thumb=>{thumb.classList.remove('border-2','border-red-600','active-thumbnail')});element.classList.add('border-2','border-red-600','active-thumbnail')}
function scrollThumbnails(direction){const maxScroll=(thumbnails.length-visibleThumbnails)*thumbnailWidth;if(direction==='next'&&scrollPosition<maxScroll){scrollPosition+=thumbnailWidth}else if(direction==='prev'&&scrollPosition>0){scrollPosition-=thumbnailWidth}
scrollPosition=Math.max(0,Math.min(scrollPosition,maxScroll));thumbnailGrid.style.transform=`translateX(-${scrollPosition}px)`;updatePaginationButtons()}
function updatePaginationButtons(){const maxScroll=(thumbnails.length-visibleThumbnails)*thumbnailWidth;if(scrollPosition<=0){prevBtn.classList.add('hidden')}else{prevBtn.classList.remove('hidden')}
if(scrollPosition>=maxScroll){nextBtn.classList.add('hidden')}else{nextBtn.classList.remove('hidden')}}
function navigateMainImage(direction){const imageThumbnails=Array.from(thumbnails).filter(thumb=>!thumb.hasAttribute('data-is-video')||thumb.getAttribute('data-is-video')!=='true');currentImageIndex=imageThumbnails.findIndex(thumb=>thumb.classList.contains('active-thumbnail'));if(direction==='next'){currentImageIndex=(currentImageIndex+1)%imageThumbnails.length}else{currentImageIndex=(currentImageIndex-1+imageThumbnails.length)%imageThumbnails.length}
imageThumbnails[currentImageIndex].click()}
thumbnails.forEach((thumb)=>{thumb.addEventListener('click',()=>{if(thumb.hasAttribute('data-is-video')&&thumb.getAttribute('data-is-video')==='true'){alert('Video would play here in a real implementation');return}
const imagePath=thumb.getAttribute('data-image-path');if(imagePath){const imageContainer=mainImage.parentElement;imageContainer.classList.add('sliding');setTimeout(()=>{mainImage.src=imagePath;imageContainer.classList.remove('sliding');imageContainer.classList.add('sliding-in');setTimeout(()=>{imageContainer.classList.remove('sliding-in')},400);setActiveThumbnail(thumb)},300)}})});nextBtn.addEventListener('click',()=>{scrollThumbnails('next')});prevBtn.addEventListener('click',()=>{scrollThumbnails('prev')});if(mainPrevBtn){mainPrevBtn.addEventListener('click',(e)=>{e.preventDefault();navigateMainImage('prev')})}
if(mainNextBtn){mainNextBtn.addEventListener('click',(e)=>{e.preventDefault();navigateMainImage('next')})}
setActiveThumbnail(thumbnails[0]);updatePaginationButtons()}